/*! Mclassical 2016-02-14 */
/*author:greenSnot@github */    
function leftPos(a){var b=0;if(a.offsetParent)do b+=a.offsetLeft;while(a=a.offsetParent);return b}function position2rotation(a,b,c){var d=distance3D(a,b,c,0,0,0),e=Math.asin(c/d),f=Math.asin(b/d/Math.cos(e));return 0>a&&(f=f>0?Math.PI-f:-Math.PI-f),{rx:180*-e/Math.PI,ry:180*(0>f?f+2*Math.PI:f)/Math.PI}}function topPos(a){var b=0;if(a.offsetParent)do b+=a.offsetTop;while(a=a.offsetParent);return b}function matrix2Text(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){return"object"==typeof a?"matrix3d("+a.join(",")+")":"matrix3d("+a+","+b+","+c+","+d+","+e+","+f+","+g+","+h+","+i+","+j+","+k+","+l+","+m+","+n+","+o+","+p+")"}function multiplyMatrix(a,b){var c=[a[0]*b[0]+a[1]*b[4]+a[2]*b[8]+a[3]*b[12],a[0]*b[1]+a[1]*b[5]+a[2]*b[9]+a[3]*b[13],a[0]*b[2]+a[1]*b[6]+a[2]*b[10]+a[3]*b[14],a[0]*b[3]+a[1]*b[7]+a[2]*b[11]+a[3]*b[15],a[4]*b[0]+a[5]*b[4]+a[6]*b[8]+a[7]*b[12],a[4]*b[1]+a[5]*b[5]+a[6]*b[9]+a[7]*b[13],a[4]*b[2]+a[5]*b[6]+a[6]*b[10]+a[7]*b[14],a[4]*b[3]+a[5]*b[7]+a[6]*b[11]+a[7]*b[15],a[8]*b[0]+a[9]*b[4]+a[10]*b[8]+a[11]*b[12],a[8]*b[1]+a[9]*b[5]+a[10]*b[9]+a[11]*b[13],a[8]*b[2]+a[9]*b[6]+a[10]*b[10]+a[11]*b[14],a[8]*b[3]+a[9]*b[7]+a[10]*b[11]+a[11]*b[15],a[12]*b[0]+a[13]*b[4]+a[14]*b[8]+a[15]*b[12],a[12]*b[1]+a[13]*b[5]+a[14]*b[9]+a[15]*b[13],a[12]*b[2]+a[13]*b[6]+a[14]*b[10]+a[15]*b[14],a[12]*b[3]+a[13]*b[7]+a[14]*b[11]+a[15]*b[15]];return c}function multiplyMatrixs(a){if(1==a.length)return a[0];for(var b=[multiplyMatrix(a[1],a[0])],c=2;c<a.length;++c)b.push(a[c]);return multiplyMatrixs(b)}function isAndroid(){var a=navigator.userAgent;return a.indexOf("Android")>=0?1:0}function isIphone(){var a=navigator.userAgent;return a.indexOf("iPhone")>=0?1:0}function isIpad(){var a=navigator.userAgent;return a.indexOf("iPad")>=0?1:0}function isMobile(){return/AppleWebKit.*Mobile/i.test(navigator.userAgent)||/Android/i.test(navigator.userAgent)||/BlackBerry/i.test(navigator.userAgent)||/IEMobile/i.test(navigator.userAgent)||/MIDP|SymbianOS|NOKIA|SAMSUNG|LG|NEC|TCL|Alcatel|BIRD|DBTEL|Dopod|PHILIPS|HAIER|LENOVO|MOT-|Nokia|SonyEricsson|SIE-|Amoi|ZTE/.test(navigator.userAgent)?/iPad/i.test(navigator.userAgent)?/MicroMessenger/i.test(navigator.userAgent)?3:2:/MicroMessenger/i.test(navigator.userAgent)?3:1:0}function webgl_detect(a){if(window.WebGLRenderingContext){for(var b=document.createElement("canvas"),c=["webgl","experimental-webgl","moz-webgl","webkit-3d"],d=!1,e=0;4>e;e++)try{if(d=b.getContext(c[e]),d&&"function"==typeof d.getParameter)return a?{name:c[e],gl:d}:!0}catch(f){}return!1}return!1}function include_js(a,b){var c=document.getElementsByTagName("head")[0],d=document.createElement("script");d.setAttribute("type","text/javascript"),d.setAttribute("src",a),c.appendChild(d),d.onload=function(){b()}}function rotation2Position(a,b,c){a=-a,b=-b;var d=snot.cubeSize/2,e=snot.cubeSize/2,f=text2Matrix("translate3d("+d+"px,"+e+"px,0) rotateY(0deg) rotateX(0deg) rotateY("+(c?-c:0)+"deg) rotateX("+(b?-b:0)+"deg) translateZ("+a+"px)");return[-f[12]+snot.cubeSize/2,f[13]-snot.cubeSize/2,-f[14]]}var distance2D=function(a,b,c,d){return Math.pow((a-c)*(a-c)+(b-d)*(b-d),.5)},distance3D=function(a,b,c,d,e,f){return Math.pow((a-d)*(a-d)+(b-e)*(b-e)+(c-f)*(c-f),.5)},epsilon=function(a){return Math.abs(a)<1e-6?0:a.toFixed(5)},text2Matrix=function(a){var b=new WebKitCSSMatrix(a);return[epsilon(b.m11),epsilon(b.m12),epsilon(b.m13),epsilon(b.m14),epsilon(b.m21),epsilon(b.m22),epsilon(b.m23),epsilon(b.m24),epsilon(b.m31),epsilon(b.m32),epsilon(b.m33),epsilon(b.m34),epsilon(b.m41),epsilon(b.m42),epsilon(b.m43),epsilon(b.m44)]};window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||function(a){return window.setTimeout(a,1e3/60)}}();